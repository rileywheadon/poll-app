{% extends "results/result-base.html" %}

<!-- TODO: Turn off padding for mobile -->
{% block result_content %}

  <!-- {% for result in poll.results %}
    <p>{{ result.value }}: {{ result.count }}</p>
  {% endfor %} -->


  <!-- This works but the immediate plot of the user's results is broken because 
   "poll.response" being in the database and it being displayed is a race conditon.
   In the history tab the correct result is there (same applies for other graphs). -->

   <!-- TODO: pass 'poll.response and parse in 'graphs.js'-->
  {% if poll.response %}
    <!-- <p class="mt-2">You responded: {{ poll.response.value }}</p> -->
    <script>graphInit("scale", {{ poll.id|safe }}, {{ poll.response|safe }}, {{ poll.results|safe }}, {{ smooth_hist(poll.results, 0.25)|safe }});</script>
    {% else %} 
    <script>graphInit("scale", {{ poll.id|safe }}, null, {{ poll.results|safe }}, {{ smooth_hist(poll.results, 0.25)|safe }});</script>
  {% endif %}
  <div id="poll-graph-{{ poll.id }}"></div>


{% endblock %}
