<div id="poll-card-{{ poll.id }}" class="poll-card py-2 border-b-2 dark:border-nord-3 overflow-hidden">    

  <!-- Include the poll question -->
  <div class="flex flex-row items-center p-2">

    <div class="flex flex-col p-2 select-none">
      {% if poll.is_anonymous == 1 %}
        <p class="text-nord-4 font-light">anonymous ⋅ {{ poll.age }}</p>
      {% else %}
        <p class="text-nord-4 font-light">@{{ poll.creator }} ⋅ {{ poll.age }}</p>
      {% endif %}
      <p class="rounded-md text-2xl font-light">{{ poll.question }}</p>
    </div>

    <!-- If the user created this poll, allow them to edit it -->
    {% if session.user.id == poll.creator_id %} 
  
      <!-- Share Button -->
      <button 
        class="ml-auto text-xl w-10 ml-2 h-10 rounded-md py-1"
        title="Share"
        onclick="copy_link('{{ poll.url }}')"
        type="button"
      >
        <i class="ml-1 fa fa-share-from-square text-black dark:text-nord-4 hover:text-2xl"></i>
      </button>

      {% include "results/poll-lock.html" %}

      <!-- Delete Poll -->
      <input class="hidden" name="poll_id" value="{{ poll.id }}">
      <button class="ml-2 text-xl w-10 h-10 rounded-md py-1"
          title="Delete"
          hx-get="{{ url_for('poll.delete', poll_id = poll.id) }}"
          hx-include="previous input"
          hx-target="#poll-card-{{ poll.id }}"
          hx-swap="delete"
          hx-confirm="Are you sure you want to delete this poll?">
        <i class="fa fa-trash text-black dark:text-nord-4 hover:text-2xl"></i>
      </button>

    {% endif %}

  </div>

  <div class="px-8 py-4">

    {% block poll_graph %} 

    {% endblock %}

  </div>

  <div class="flex flex-row text-sm px-4 items-center my-4 select-none">
    <p class="font-light">
      Votes: <i>{{ poll.votes }}</i>
    </p>
    <button 
      class="ml-auto px-4 h-10 rounded-md border-2 dark:border-nord-4 dark:hover:bg-nord-0 py-1 text-nord-0 flex items-center justify-center"
      onclick="toggle_comments()"
    >
      <span class="text-black dark:text-nord-4" id="comments-toggle">Show Comments</span>
      <i class="fa fa-comment ml-2 text-black dark:text-nord-4 text-xl"></i>
    </button>
     <button 
      class="ml-2 px-4 h-10 rounded-md border-2 dark:border-nord-4 dark:hover:bg-nord-0 py-1 text-nord-0 flex items-center justify-center"
      hx-get="{{ url_for('home.result', poll_id=poll.id, show_graph=True) }}"
      hx-target="closest .poll-card"
      hx-swap="outerHTML"
    >
      <span class="text-black dark:text-nord-4">Results</span>
      <i class="fa fa-chart-simple ml-2 text-black dark:text-nord-4 text-xl"></i>
    </button>
  </div>

  <div class="px-4 py-4 hidden" id="poll-comments">

    {% include "results/poll-comments.html" %}

  </div>

</div>
