<!-- Include the poll question -->
<p class="text-xl font-bold pb-4">{{ poll.question }}</p>
<form class="pb-4"
      hx-post="/home/respond" 
      hx-target="closest .poll-card"
      hx-trigger="submit"
      hx-swap="innerHTML">

  <!-- Hidden input that incldues the poll ID in the HTTP request -->
  <input type="hidden" name="poll_id" value="{{ poll.id }}">

  <div id="tier-list" class="w-[36rem] mt-4">

    {% for tier in ["S", "A", "B", "C", "D", "F"] %}
      <div class="flex flex-row h-16">
        <div class="w-16 border border-black mt-[-1px] ml-[-1px] flex items-center justify-center">
          <span class="text-2xl">{{ tier }}</span>
        </div>
        <div class="border border-black mt-[-1px] ml-[-1px] grow flex flex-row justify-start tier-{{ tier }}"
             ondragstart="tierDragStart(event)"
             ondragenter="tierDragEnter(event)" 
             ondragover="cancelDefault(event)" 
             ondragexit="tierDragExit(event)"
             ondrop="tierDrop(event)">
        </div>
      </div>
    {% endfor %}

  </div>

  <div class="flex flex-row h-16 w-min my-4">
    {% for answer in poll.answers %}
      <div class="bg-zinc-700 rounded-xl h-full w-32 flex items-center justify-center"
           draggable="true"
           ondragstart="tierDragStart(event)"
           ondragenter="cancelDefault(event)" 
           ondragover="cancelDefault(event)" 
           ondragexit="cancelDefault(event)"
           ondrop="cancelDefault(event)">
        {{ answer.answer }}
        <input type="hidden" name="answer_id" value="{{ answer.id }}">
      </div>
    {% endfor %}
  </div>

  <!-- Include the submit button -->
  <div>
    <input class="border border-zinc-200 px-2 mt-4" 
           type="submit" 
           value="Submit">
  </div>

</form>

<hr>

<p class="text-xl font-bold py-4">Results</p>
<p>Responses: {{ poll.response_count() }}
<ul class="px-2 list-disc list-inside">
  {% for row in poll.response_data() %}
  <li>{{ row["text"] }}: {{ row["tiers"] }}
  {% endfor %}
</ul>
