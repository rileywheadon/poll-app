{% extends "base.html" %}

{% block title %}Polll - Home{% endblock %}

{% block body %}

<!-- Settings div (empty by default) -->
<div id="settings">

</div>

<main id="main" class="relative min-h-screen">

  <!-- Background -->
  <!-- NOTE: Add extra padding to account for the footer on small screens -->
  <div class="w-screen h-screen flex flex-col dark:text-nord-4 dark:bg-gradient-to-t dark:from-grad-start dark:to-grad-end pb-10 md:pb-0">

    {% include "navbar.html" %}

    <!-- Document Body -->
    <div class="flex overflow-hidden flex-row grow md:pt-4">

      <!-- Left Sidebar -->
      <div class="hidden p-2 md:flex md:justify-center md:px-8 select-none">
        <div class="flex flex-col overflow-hidden items-start h-full min-w-40">
          {{ macs.sidebarButtons() }}
        </div>
      </div>

      <!-- Main Column (Polls) -->
      <div id="home-content" class="w-full overflow-auto p-2 no-scrollbar select-none shrink">

        <div id="home-spinner" class="peer home-indicator w-full flex flex-row grow justify-center items-center size-fit">
          <i class="fa-solid fa-spinner animate-spin text-base md:text-2xl text-polll-green p-4"></i> 
        </div>

        <div class="peer-[.htmx-request]:hidden">
          {% block home_content %}{% endblock %}
        </div>

      </div>

      <!--Right Sidebar-->
      <div class="hidden md:flex md:justify-center md:items-center md:px-4 select-none">

        {% if session.state.tab == "feed" %}

          <div class="flex flex-col overflow-hidden items-center h-full min-w-40">
            <p class="mb-2 font-regular">Boards</p>
            {% for id, board in session.boards.items() %}
        
              <!-- This tag is fat as fuck lmao -->
              <a class="flex flex-row items-center justify-center rounded-md w-full h-8 mb-2 px-10 font-light text-polll-blue {% if session.state.board.id == board.id %} text-polll-green {% endif %}" href="{{ url_for('home.feed', board = board.id, order = session.state.order or 'hot') }}">{{ board.name }}</a>

            {% endfor %}
          </div>
           
        {% endif %}

      </div>

    </div>

  </div>

  <!-- Footer (only appears on small screens) -->
  <footer class="absolute bottom-0 w-full bg-neutral-900">
    <div class="visible md:hidden flex flex-row justify-around items-center select-none">
      {{ macs.sidebarButtons(show_icons=False) }}
    </div>
  </footer>

</main>

{% endblock %}
